{% extends "core/block_admin/base.html" %}

{% block title %}Block Dashboard{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <h1 class="text-3xl font-bold text-gray-800 text-center mb-6">
    Welcome, {{ request.user.full_name|default:request.user.username }}!
  </h1>
  <p class="text-center text-gray-600 mb-10">
    Here's an overview of complaints handled by your block committee.
  </p>

  <!-- Status-wise complaint cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    
    <!-- Total Complaints -->
    <div class="bg-blue-100 border border-blue-300 rounded-xl p-6 shadow hover:shadow-md transition">
      <div class="flex items-center justify-between mb-4">
        <div class="bg-blue-600 text-white p-3 rounded-full">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M9 12h6m-3-3v6m-6 3h12a2 2 0 002-2v-5a2 2 0 00-2-2H6a2 2 0 00-2 2v5a2 2 0 002 2z"/>
          </svg>
        </div>
        <span class="text-sm text-blue-700 font-semibold">Total Complaints</span>
      </div>
      <p class="text-4xl font-bold text-blue-800 text-center">{{ total_count }}</p>
    </div>

    <!-- Accepted Complaints -->
    <div class="bg-indigo-100 border border-indigo-300 rounded-xl p-6 shadow hover:shadow-md transition">
      <div class="flex items-center justify-between mb-4">
        <div class="bg-indigo-600 text-white p-3 rounded-full">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <span class="text-sm text-indigo-700 font-semibold">Accepted</span>
      </div>
      <p class="text-4xl font-bold text-indigo-800 text-center">{{ accepted_count }}</p>
    </div>

    <!-- Rejected Complaints -->
    <div class="bg-red-100 border border-red-300 rounded-xl p-6 shadow hover:shadow-md transition">
      <div class="flex items-center justify-between mb-4">
        <div class="bg-red-600 text-white p-3 rounded-full">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </div>
        <span class="text-sm text-red-700 font-semibold">Rejected</span>
      </div>
      <p class="text-4xl font-bold text-red-800 text-center">{{ rejected_count }}</p>
    </div>

    <!-- Solved Complaints -->
    <div class="bg-green-100 border border-green-300 rounded-xl p-6 shadow hover:shadow-md transition">
      <div class="flex items-center justify-between mb-4">
        <div class="bg-green-600 text-white p-3 rounded-full">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <span class="text-sm text-green-700 font-semibold">Solved</span>
      </div>
      <p class="text-4xl font-bold text-green-800 text-center">{{ solved_count }}</p>
    </div>

    <!-- Pending Complaints -->
    <div class="bg-yellow-100 border border-yellow-300 rounded-xl p-6 shadow hover:shadow-md transition">
      <div class="flex items-center justify-between mb-4">
        <div class="bg-yellow-500 text-white p-3 rounded-full">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
        </div>
        <span class="text-sm text-yellow-800 font-semibold">Pending</span>
      </div>
      <p class="text-4xl font-bold text-yellow-800 text-center">{{ pending_count }}</p>
    </div>

  </div><br>

  <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Forwarded Complaints by Panchayat</h2>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  {% for p in forwarded_panchayat_counts %}
    <div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-transform transform hover:-translate-y-1">
      <div class="flex items-center justify-between mb-4">
        <div class="bg-green-500 text-white p-3 rounded-full shadow-md">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <span class="text-sm font-semibold text-green-700">Forwarded</span>
      </div>
      <h3 class="text-xl font-bold text-gray-900 mb-2">{{ p.panchayat }}</h3>
      <p class="text-3xl font-extrabold text-gray-800 text-center">{{ p.count }}</p>
    </div>
  {% empty %}
    <p class="text-gray-500 text-center col-span-full">No forwarded complaints yet.</p>
  {% endfor %}
</div>

</div>
{% endblock %}
