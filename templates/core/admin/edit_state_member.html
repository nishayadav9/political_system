{% extends 'core/admin/base.html' %}
{% block content %}

<style>
/* -------------------- General Styles -------------------- */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

h2 {
    margin-bottom: 20px;
    color: #333;
    font-weight: 600;
    text-align: center;
}

.form-section {
    background: #f9f9f9;
    padding: 25px;
    margin-bottom: 25px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.form-section h4 {
    margin-bottom: 20px;
    color: #555;
    font-weight: 500;
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

/* -------------------- Form Fields -------------------- */
.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-weight: 500;
    margin-bottom: 5px;
    color: #444;
}

.form-control {
    padding: 10px 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
    outline: none;
    transition: all 0.2s ease;
}

.form-control:focus {
    border-color: #007bff;
    box-shadow: 0 0 5px rgba(0,123,255,0.3);
}

textarea.form-control {
    min-height: 70px;
    resize: vertical;
}

select.form-control {
    height: 38px;
}

/* -------------------- Checkboxes -------------------- */
.form-check {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 15px;
}

/* -------------------- Buttons -------------------- */
.btn {
    padding: 10px 20px;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    border: none;
    transition: all 0.2s ease;
}

.btn-primary {
    background-color: #007bff;
    color: #fff;
}

.btn-primary:hover {
    background-color: #0069d9;
}

.btn-secondary {
    background-color: #6c757d;
    color: #fff;
}

.btn-secondary:hover {
    background-color: #5a6268;
}

/* -------------------- Alerts -------------------- */
.alert {
    padding: 10px 15px;
    border-radius: 6px;
    margin-bottom: 15px;
    font-size: 14px;
}

.alert-success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error, .alert-danger {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

/* -------------------- File Inputs -------------------- */
input[type="file"] {
    padding: 5px;
}

/* -------------------- Responsive -------------------- */
@media (max-width: 576px) {
    .form-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<h2>Edit State Level Party Member</h2>

<!-- Messages -->
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %}
{% endif %}

<form method="POST" enctype="multipart/form-data">
  {% csrf_token %}

  <!-- -------------------- Personal Details -------------------- -->
  <div class="form-section">
    <h4>Personal Details</h4>
    <div class="form-grid">
      <div class="form-group">
        <label for="id_username">Username</label>
        <input type="text" name="username" id="id_username" class="form-control" value="{{ member.username }}" required>
      </div>

      <div class="form-group">
        <label for="id_full_name">Full Name</label>
        <input type="text" name="full_name" id="id_full_name" class="form-control" value="{{ member.full_name }}" required>
      </div>

      <div class="form-group">
        <label for="id_father_or_mother_name">Father/Mother Name</label>
        <input type="text" name="father_or_mother_name" id="id_father_or_mother_name" class="form-control" value="{{ member.father_or_mother_name }}">
      </div>

      <div class="form-group">
        <label for="id_date_of_birth">Date of Birth</label>
        <input type="date" name="date_of_birth" id="id_date_of_birth" class="form-control" value="{{ member.date_of_birth|date:'Y-m-d' }}">
      </div>

      <div class="form-group">
        <label for="id_gender">Gender</label>
        <select name="gender" id="id_gender" class="form-control">
          <option value="Male" {% if member.gender == "Male" %}selected{% endif %}>Male</option>
          <option value="Female" {% if member.gender == "Female" %}selected{% endif %}>Female</option>
          <option value="Other" {% if member.gender == "Other" %}selected{% endif %}>Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="id_mobile_number">Mobile Number</label>
        <input type="text" name="mobile_number" id="id_mobile_number" class="form-control" value="{{ member.mobile_number }}" required>
      </div>

      <div class="form-group">
        <label for="id_alternate_mobile_number">Alternate Mobile</label>
        <input type="text" name="alternate_mobile_number" id="id_alternate_mobile_number" class="form-control" value="{{ member.alternate_mobile_number }}">
      </div>

      <div class="form-group">
        <label for="id_email">Email</label>
        <input type="email" name="email" id="id_email" class="form-control" value="{{ member.email }}">
      </div>

      <div class="form-group">
        <label for="id_aadhar_or_govt_id">Aadhar/Govt ID</label>
        <input type="text" name="aadhar_or_govt_id" id="id_aadhar_or_govt_id" class="form-control" value="{{ member.aadhar_or_govt_id }}">
      </div>

      <div class="form-group">
        <label for="id_permanent_address">Permanent Address</label>
        <textarea name="permanent_address" id="id_permanent_address" class="form-control">{{ member.permanent_address }}</textarea>
      </div>

      <div class="form-group">
        <label for="id_current_address">Current Address</label>
        <textarea name="current_address" id="id_current_address" class="form-control">{{ member.current_address }}</textarea>
      </div>

      <div class="form-group">
        <label for="id_state">State</label>
        <input type="text" id="id_state" name="state" class="form-control" value="Bihar" readonly>
      </div>

      <div class="form-group">
        <label for="id_district">District</label>
        <select id="id_district" name="district" class="form-control">
          <option value="" disabled>Select District</option>
          {% for d in districts %}
            <option value="{{ d }}" {% if member.district == d %}selected{% endif %}>{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="id_block">Block / Tehsil / Taluka</label>
        <select id="id_block" name="block_tehsil_taluka" class="form-control">
          {% if member.block_tehsil_taluka %}
            <option value="{{ member.block_tehsil_taluka }}" selected>{{ member.block_tehsil_taluka }}</option>
          {% else %}
            <option value="" disabled selected>Select Block</option>
          {% endif %}
        </select>
      </div>

      <div class="form-group">
        <label for="id_village_town_city">Village/Town/City</label>
        <input type="text" name="village_town_city" id="id_village_town_city" class="form-control" value="{{ member.village_town_city }}">
      </div>

      <div class="form-group">
        <label for="id_pincode">Pincode</label>
        <input type="text" name="pincode" id="id_pincode" class="form-control" value="{{ member.pincode }}">
      </div>
    </div>
  </div>

  <!-- -------------------- Official & Other Details -------------------- -->
  <div class="form-section">
    <h4>Official & Other Details</h4>
    <div class="form-grid">
      <div class="form-group">
        <label for="id_role">Role</label>
        <select name="role" id="id_role" class="form-control">
          {% for role in roles %}
            <option value="{{ role.id }}" {% if member.role and member.role.id == role.id %}selected{% endif %}>{{ role.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="id_assigned_districts">Assigned Districts</label>
        <input type="text" name="assigned_districts" id="id_assigned_districts" class="form-control" value="{{ member.assigned_districts }}">
      </div>

      <div class="form-group">
        <label for="id_political_experience_years">Political Experience (Years)</label>
        <input type="number" name="political_experience_years" id="id_political_experience_years" class="form-control" value="{{ member.political_experience_years }}">
      </div>

      <div class="form-group">
        <label for="id_photo">Photo</label>
        <input type="file" name="photo" id="id_photo" class="form-control">
        {% if member.photo %}
          <small>Current: <a href="{{ member.photo.url }}" target="_blank">View</a></small>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="id_id_proof">ID Proof</label>
        <input type="file" name="id_proof" id="id_id_proof" class="form-control">
        {% if member.id_proof %}
          <small>Current: <a href="{{ member.id_proof.url }}" target="_blank">View</a></small>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="id_digital_signature">Digital Signature</label>
        <input type="file" name="digital_signature" id="id_digital_signature" class="form-control">
        {% if member.digital_signature %}
          <small>Current: <a href="{{ member.digital_signature.url }}" target="_blank">View</a></small>
        {% endif %}
      </div>

      

      <div class="form-check">
        <input type="checkbox" name="is_active" id="id_is_active" class="form-check-input" {% if member.is_active %}checked{% endif %}>
        <label class="form-check-label" for="id_is_active">Active</label>
      </div>
    </div>
  </div>

  <div class="form-group mt-3" style="text-align:center;">
    <button type="submit" class="btn btn-primary">Update Member</button>
    <a href="{% url 'manage_state_member' %}" class="btn btn-secondary">Cancel</a>
  </div>
</form>

{% endblock %}
